<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Simulateur RSE ‚Äî NovaFleet</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Inconsolata:wght@400;600&display=swap" rel="stylesheet">

<!-- Anti-blocage Gamma : s'ouvre en plein √©cran si charg√© dans un iframe/proxy.
     Pour autoriser l'int√©gration en iframe, appeler l'URL avec ?embed=1 -->
<script>
(function () {
  try {
    const usp = new URLSearchParams(location.search);
    if (usp.get('embed') === '1') return; // autoriser l'embed volontaire
    if (window.top !== window.self) {
      try { window.top.location.href = location.href + (location.search ? '&' : '?') + 'from=embed'; }
      catch (e) {
        var a = document.createElement('a');
        a.href = location.href + (location.search ? '&' : '?') + 'from=embed';
        a.target = '_blank'; a.rel = 'noopener';
        document.body.appendChild(a); a.click();
      }
    }
  } catch(e) {}
})();
</script>

<style>
:root{--bg:#F2F2F2;--ink:#151617;--muted:#8c8f93;--card:#fff;--border:#e6e6e6}
*{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--ink);font-family:"Inconsolata",monospace}
.wrap{max-width:920px;margin:34px auto;padding:0 16px}
h1{font-family:"Montserrat",system-ui,sans-serif;font-size:clamp(26px,3.6vw,38px);margin:0 0 10px}
p.sub{color:var(--muted);margin:0 0 18px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:20px;margin:16px 0}
label{display:block;margin:12px 0 6px;font-weight:600}
input{width:100%;padding:11px 12px;border:1px solid #d2d5d9;border-radius:10px;font:inherit}
.grid{display:grid;grid-template-columns:1fr;gap:14px}
@media (min-width:740px){ .grid{grid-template-columns:1fr 1fr} }
.btn{display:inline-block;margin-top:16px;background:#151617;color:#fff;border:0;border-radius:12px;padding:12px 20px;font-weight:700;cursor:pointer}
.btn.secondary{background:#f7f7f7;color:#111;border:1px solid #e6e6e6}
.result{margin-top:18px;padding:16px;border-radius:12px;background:#eef5ff;border:1px solid #d7e6ff}
.kv{display:grid;grid-template-columns:1fr auto;gap:10px;margin:4px 0}
.muted{color:#8c8f93;font-size:.95em}
.badge{display:inline-block;font-size:12px;border:1px solid #d0d7de;border-radius:999px;padding:5px 10px;margin-right:8px}
</style>
</head>
<body>
<div class="wrap">
  <h1>üå± Simulateur d‚ÄôImpact RSE NovaFleet</h1>
  <p class="sub">
    √âvaluez vos gains environnementaux et sociaux. <b>Avec NovaFleet, l‚Äôusage de mat√©riaux & peintures responsables est int√©gr√© par d√©faut</b> (pas de case √† cocher).
    Vos r√©sultats sont consolid√©s automatiquement dans votre rapport RSE annuel NovaFleet.
  </p>

  <div class="card">
    <form id="rseForm" novalidate>
      <div class="grid">
        <div><label>Nom de l‚Äôentreprise *</label><input type="text" id="nom" required placeholder="Entreprise Dupont"></div>
        <div><label>Nom responsable flotte</label><input type="text" id="respo" placeholder="Pr√©nom Nom"></div>
        <div><label>Email *</label><input type="email" id="email" required placeholder="contact@exemple.fr"></div>
        <div><label>T√©l√©phone *</label><input type="tel" id="telephone" required placeholder="+33 6 12 34 56 78"></div>
        <div><label>Taille de flotte (nb v√©hicules) *</label><input type="number" id="flotte" min="1" required placeholder="ex : 120"></div>
        <div><label>Nombre de sinistres / an *</label><input type="number" id="sinistres" min="0" required placeholder="ex : 40"></div>
        <div><label>Nb restitutions / ventes / an *</label><input type="number" id="restitutions" min="0" required placeholder="ex : 30"></div>
      </div>
      <button type="submit" class="btn">Calculer mon impact</button>
      <a class="btn secondary" href="https://novafleet.fr/">‚¨ÖÔ∏è Retour au site</a>
    </form>

    <div id="resultat" class="result" style="display:none"></div>
  </div>

  <div class="card muted">
    <div class="badge">‚öôÔ∏è Hypoth√®ses indicatives</div>
    <div class="badge">üéØ Gains NovaFleet : 25‚Äì30%</div>
    <ul style="margin:10px 0 0 18px">
      <li><b>CO‚ÇÇ √©vit√©</b> : 120 kg / sinistre, 200 kg / restitution ; r√©duction 25% (<i>int√®gre +5% via mat√©riaux/peintures responsables</i>).</li>
      <li><b>D√©chets dangereux √©vit√©s</b> : 4 kg / sinistre ; r√©duction 25% (<i>int√®gre +5%</i>).</li>
      <li><b>Eau √©conomis√©e</b> : 60 L / sinistre ; r√©duction 30%.</li>
      <li><b>Orientation partenaires</b> : dossiers confi√©s √† des <b>partenaires engag√©s et mieux r√©mun√©r√©s</b> (valorisation mati√®re, qualit√© & tra√ßabilit√©).</li>
    </ul>
  </div>
</div>

<script>
// Formatages
const f1 = v => v.toLocaleString('fr-FR', {maximumFractionDigits:1, minimumFractionDigits:1});
const f0 = v => v.toLocaleString('fr-FR', {maximumFractionDigits:0});

document.getElementById("rseForm").addEventListener("submit", (e)=>{
  e.preventDefault();

  const val = id => document.getElementById(id).value.trim();
  if (!val('nom') || !val('email') || !val('telephone') || !(+document.getElementById('flotte').value>0)) {
    alert("Merci de remplir les champs obligatoires.");
    return;
  }

  const sin  = +document.getElementById("sinistres").value || 0;
  const res  = +document.getElementById("restitutions").value || 0;

  // Hypoth√®ses (indicatives) ‚Äî coh√©rentes avec 25‚Äì30 % de gains avec NovaFleet
  const G_CO2   = 0.25;   // -25% sur CO2
  const G_WASTE = 0.25;   // -25% sur d√©chets dangereux
  const G_WATER = 0.30;   // -30% sur eau
  const BONUS   = 1.05;   // +5% int√©gr√© par d√©faut (produits/peintures responsables)

  // Facteurs de base
  const CO2S   = 120;   // kg CO2 √©vit√©s par sinistre avant % (ordre de grandeur)
  const CO2R   = 200;   // kg CO2 √©vit√©s par restitution
  const WASTE  = 4;     // kg d√©chets dangereux √©vit√©s / sinistre
  const WATER  = 60;    // L d'eau √©conomis√©s / sinistre

  // Calculs (annuels)
  const co2      = (sin*CO2S + res*CO2R) * G_CO2 * BONUS; // kg
  const dechets  = (sin*WASTE) * G_WASTE * BONUS;         // kg
  const eau      = (sin*WATER) * G_WATER;                 // L
  const dossiers = sin + res;                             // volume confi√© √† l'√©cosyst√®me engag√©

  const box = document.getElementById("resultat");
  box.style.display = "block";
  box.innerHTML = `
    <div class="kv"><div>üåç <b>CO‚ÇÇ √©vit√© / an</b></div><div>${f1(co2/1000)} t</div></div>
    <div class="kv"><div>üß™ <b>D√©chets dangereux √©vit√©s / an</b></div><div>${f1(dechets)} kg</div></div>
    <div class="kv"><div>üíß <b>Eau √©conomis√©e / an</b></div><div>${f1(eau)} L</div></div>
    <div class="kv"><div>ü§ù <b>Dossiers orient√©s partenaires engag√©s et mieux r√©mun√©r√©s</b></div><div>${f0(dossiers)}</div></div>
    <p class="muted" style="margin-top:10px">
      Les donn√©es issues de ce simulateur sont int√©gr√©es dans le rapport RSE consolid√© fourni annuellement par NovaFleet.
    </p>`;
});
</script>
</body>
</html>

